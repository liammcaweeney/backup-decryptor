(this["webpackJsonpbackup-decryptor"]=this["webpackJsonpbackup-decryptor"]||[]).push([[0],{128:function(e,t,r){},130:function(e,t,r){},134:function(e,t){},136:function(e,t){},146:function(e,t){},148:function(e,t){},175:function(e,t){},177:function(e,t){},178:function(e,t){},183:function(e,t){},185:function(e,t){},204:function(e,t){},216:function(e,t){},219:function(e,t){},255:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r.n(n),c=r(121),o=r.n(c),s=(r(128),r(9)),i=r.n(s),u=r(21),l=r(18),f=r(14),d=(r(130),r(12)),b=r(69),p=r.n(b),j=r(122),h=r(123),v=function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(r,t));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.a)(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function e(t){var r=this;Object(d.a)(this,e),this.masterSeedPhrase=void 0,this.getMasterSeedPhrase=function(){return r.masterSeedPhrase},this.getSeedPhrase=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null===t||void 0===t?void 0:t.keystore)?t.keystore:t,a=n.publickeys.ed25519,c=a.pubKey.data||Array.from(a.toBuffer()),s="".concat(r.masterSeedPhrase).concat(c.toString()),o=p.a.SHA256(s).toString(p.a.enc.Hex),e.abrupt("return",O(n,o));case 5:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),this.masterSeedPhrase=t};m.fromPassword=function(){var e=Object(u.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t,r);case 2:return n=e.sent,e.abrupt("return",new m(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m.fromRecoveryCode=function(){var e=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,h.entropyToMnemonic(n);case 2:return r=e.sent,e.abrupt("return",new m(r));case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();var y=r.p+"static/media/copy.c0a32f3c.svg",w=r(4);var x=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(),o=Object(f.a)(c,2),s=o[0],d=o[1],b=Object(n.useState)([]),p=Object(f.a)(b,2),j=p[0],h=p[1],v=Object(n.useState)(""),O=Object(f.a)(v,2),x=O[0],S=O[1],g=Object(n.useState)(""),k=Object(f.a)(g,2),P=k[0],C=k[1],N=Object(n.useState)(!1),K=Object(f.a)(N,2),R=K[0],A=K[1],B=Object(n.useState)(void 0),D=Object(f.a)(B,2),I=D[0],F=D[1],M=Object(n.useState)([]),E=Object(f.a)(M,2),J=E[0],T=E[1],H=Object(n.useState)(""),q=Object(f.a)(H,2),G=q[0],X=q[1];Object(n.useEffect)((function(){try{if(s)if(X(""),S(""),T([]),C(""),console.log(s),s.masterKey){var e;F(s.masterKey);var t=Object.values(null===s||void 0===s||null===(e=s.accounts)||void 0===e?void 0:e.wallets);h(t.map((function(e){return Object(l.a)(Object(l.a)({},e.walletInfo.data),{},{label:e.label})})))}else if(s.masterKeystore){var r;F(s.masterKeystore.keystore.masterKey);var n=Object.values(null===s||void 0===s||null===(r=s.wallets)||void 0===r?void 0:r.wallets);h(n.map((function(e){return Object(l.a)(Object(l.a)({},e.walletInfo.data),{},{label:e.label})})))}else if(s.criticalData){var a;F(s.criticalData.masterKey);var c=Object.values(null===s||void 0===s||null===(a=s.accounts)||void 0===a?void 0:a.wallets);h(c.map((function(e){return Object(l.a)(Object(l.a)({},e.walletInfo.data),{},{label:e.label})})))}else F(void 0),h([Object(l.a)(Object(l.a)({},s),{},{label:"Seed Phrase"})])}catch(o){console.error(o)}}),[s]);var z=Object(n.useRef)(null),L=function(e){Promise.all(j.map((function(t){return e.getSeedPhrase(t).then((function(e){return{label:t.label,phrases:e}}))}))).then((function(e){T(e),X("")})).catch((function(e){console.error(e),T([]),X(e)}))},Q=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),I?R?m.fromRecoveryCode(P).then(L).catch((function(e){console.error(e),T([]),X(e)})):m.fromPassword(x,I).then(L).catch((function(e){console.error(e),T([]),X(e)})):m.fromPassword(x,j[0]).then((function(e){return[{label:j[0].label,phrases:e.getMasterSeedPhrase()}]})).then((function(e){T(e),X("")})).catch((function(e){console.error(e),T([]),X(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App-header",children:"XDEFI Backup Decryptor"}),Object(w.jsx)("h2",{children:"Select the a backup file to be decrypted"}),Object(w.jsxs)("div",{className:"body",children:[""===r,Object(w.jsx)("input",{type:"file",name:"file",ref:z,style:{display:"none"},required:!0,onChange:function(e){var t=e.target;if(t){var r=t.files;if(r){if(r.length){var n=r[0];a(n.name);var c=new FileReader;c.readAsText(n),c.onloadend=function(e){if(e.target&&e.target.result)try{var t=JSON.parse(e.target.result.toString());d(t)}catch(r){console.log(r)}}}}else a("Browse")}}}),Object(w.jsxs)("div",{className:"fileSelection",children:["Select File ",Object(w.jsxs)("button",{onClick:function(){z&&z.current&&z.current.click()},children:[" ",""===r?"Browse Files":r," "]})]}),!!j.length&&Object(w.jsxs)("form",{onSubmit:Q,children:[Object(w.jsx)("div",{className:"password",children:R?Object(w.jsxs)("div",{children:["Recovery Code ",Object(w.jsx)("input",{placeholder:"  recovery code",onChange:function(e){return C(e.target.value)},type:"text",title:"recoveryCode",name:"recoveryCode",value:P}),Object(w.jsx)("button",{type:"button",onClick:function(){A(!1)},children:" Switch to password"})]}):Object(w.jsxs)("div",{children:["Password ",Object(w.jsx)("input",{placeholder:"  password",onChange:function(e){return S(e.target.value)},type:"password",title:"password",name:"password",value:x}),I&&Object(w.jsx)("button",{type:"button",onClick:function(){A(!0)},children:"Switch to Recovery Code"})]})}),Object(w.jsx)("button",{type:"submit",children:"Get Seed Phrase"})]}),Object(w.jsx)("div",{className:"accounts",children:J.map((function(e){return Object(w.jsxs)("div",{className:"account",children:[e.label,": ",e.phrases,Object(w.jsx)("img",{src:y,onClick:function(){navigator.clipboard.writeText(e.phrases).then((function(){return alert("Copied seed phrase")}))},alt:"copy"})]},e.label)}))}),""!==G&&Object(w.jsxs)("div",{className:"error",children:[" ",G," "]})]})]})};o.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(x,{})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.cdfc4d55.chunk.js.map